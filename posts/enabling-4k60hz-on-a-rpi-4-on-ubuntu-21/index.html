<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="pancho horrillo"><meta name=description content="Rantings about life."><meta name=generator content="Hugo 0.118.2"><title>Enabling 4K@60Hz on a RPi 4 on Ubuntu 21.10 Impish Indri &#183; …soul, as in software?</title><link rel="shortcut icon" href=https://blog.pancho.name/images/favicon.ico><link rel=stylesheet href=https://blog.pancho.name/css/spectre.min.css><link rel=stylesheet href=https://blog.pancho.name/css/style.css><link rel=stylesheet href=https://blog.pancho.name/css/highlight.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css><link href rel=alternate type=application/rss+xml title="…soul, as in software?"><meta property="og:title" content="Enabling 4K@60Hz on a RPi 4 on Ubuntu 21.10 Impish Indri"><meta property="og:description" content="I have a Raspberry Pi 4 with 8 GiB of RAM, connected to a 4K monitor (Dell U3818DW). Enabling 60 Hz refresh rate should be as easy as adding the hdmi_enable_4kp60=1 flag to /boot/firmware/config.txt.
But there seems to be a problem parsing the EDID information, because the resulting mode only affords 30 Hz.
Fortunately, we can program the mode ourselves:
[pi4] # Enable 4K@60Hz, single monitor #force_turbo=1 disable_fw_kms_setup=1 max_framebuffers=1 hdmi_enable_4kp60=1 hdmi_cvt=3840 1600 60 7 core_freq=600 core_freq_min=600 Code Snippet 1: config."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.pancho.name/posts/enabling-4k60hz-on-a-rpi-4-on-ubuntu-21/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-19T07:27:00+01:00"><meta property="article:modified_time" content="2021-11-19T07:27:00+01:00"><meta itemprop=name content="Enabling 4K@60Hz on a RPi 4 on Ubuntu 21.10 Impish Indri"><meta itemprop=description content="I have a Raspberry Pi 4 with 8 GiB of RAM, connected to a 4K monitor (Dell U3818DW). Enabling 60 Hz refresh rate should be as easy as adding the hdmi_enable_4kp60=1 flag to /boot/firmware/config.txt.
But there seems to be a problem parsing the EDID information, because the resulting mode only affords 30 Hz.
Fortunately, we can program the mode ourselves:
[pi4] # Enable 4K@60Hz, single monitor #force_turbo=1 disable_fw_kms_setup=1 max_framebuffers=1 hdmi_enable_4kp60=1 hdmi_cvt=3840 1600 60 7 core_freq=600 core_freq_min=600 Code Snippet 1: config."><meta itemprop=datePublished content="2021-11-19T07:27:00+01:00"><meta itemprop=dateModified content="2021-11-19T07:27:00+01:00"><meta itemprop=wordCount content="113"><meta itemprop=keywords content="raspberrypi,linux,firmware,ubuntu,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Enabling 4K@60Hz on a RPi 4 on Ubuntu 21.10 Impish Indri"><meta name=twitter:description content="I have a Raspberry Pi 4 with 8 GiB of RAM, connected to a 4K monitor (Dell U3818DW). Enabling 60 Hz refresh rate should be as easy as adding the hdmi_enable_4kp60=1 flag to /boot/firmware/config.txt.
But there seems to be a problem parsing the EDID information, because the resulting mode only affords 30 Hz.
Fortunately, we can program the mode ourselves:
[pi4] # Enable 4K@60Hz, single monitor #force_turbo=1 disable_fw_kms_setup=1 max_framebuffers=1 hdmi_enable_4kp60=1 hdmi_cvt=3840 1600 60 7 core_freq=600 core_freq_min=600 Code Snippet 1: config."><meta name=twitter:site content="@https://www.twitter.com/panchoHorrillo"></head><body onload=setPixelFont()><div class="container p-fixed" style=z-index:3><nav class="navbar m-2 p-2 s-rounded shadow bg-primary"><section class=navbar-section><button class="btn btn-action btn-primary s-circle text-gray" id=pixelfont-toggle><i class="fas fa-robot fa-lg"></i></button></section><section class=navbar-section><a class="btn btn-primary" href=https://blog.pancho.name/>Home</a>
<a class="btn btn-primary mx-2" href=/about/>About</a>
<a class="btn btn-accent" href target=_blank><i class="fas fa-rss fa-lg"></i></a></section></nav></div><section class="container grid-md"><div class=columns><article class="container p-centered mt-space"><header><h2 class=text-center>Enabling 4K@60Hz on a RPi 4 on Ubuntu 21.10 Impish Indri</h2><h6 class="text-gray text-italic"></h6></header><section class=my-gap><p>I have a Raspberry Pi 4 with 8 GiB of RAM, connected to a 4K monitor (Dell
U3818DW). Enabling 60 Hz refresh rate should be as easy as adding
the <a href=https://www.raspberrypi.com/documentation/computers/configuration.html#hdmi-configuration><code>hdmi_enable_4kp60=1</code></a> flag to <code>/boot/firmware/config.txt</code>.</p><p>But there seems to be a problem parsing the EDID information, because the
resulting mode only affords 30 Hz.</p><p>Fortunately, we can program the mode ourselves:</p><p><a id=code-snippet--config.txt></a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#66d9ef>[pi4]</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable 4K@60Hz, single monitor</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#force_turbo=1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>disable_fw_kms_setup</span><span style=color:#f92672>=</span><span style=color:#e6db74>1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>max_framebuffers</span><span style=color:#f92672>=</span><span style=color:#e6db74>1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>hdmi_enable_4kp60</span><span style=color:#f92672>=</span><span style=color:#e6db74>1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>hdmi_cvt</span><span style=color:#f92672>=</span><span style=color:#e6db74>3840 1600 60 7</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>core_freq</span><span style=color:#f92672>=</span><span style=color:#e6db74>600</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>core_freq_min</span><span style=color:#f92672>=</span><span style=color:#e6db74>600</span>
</span></span></code></pre></div><div class=src-block-caption><span class=src-block-number><a href=#code-snippet--config.txt>Code Snippet 1</a>:</span>
config.txt</div><p>Note that <code>core_freq</code> has to be set to 600 in order to provide the necessary
bandwidth for the mode. This is usually taken care of by setting
<code>hdmi_enable_4kp6h=1</code>, but not in this case.</p><code class=text-bold>Tags</code>
<a class="chip text-accent" href=https://blog.pancho.name/tags/raspberrypi>raspberrypi</a>
<a class="chip text-accent" href=https://blog.pancho.name/tags/linux>linux</a>
<a class="chip text-accent" href=https://blog.pancho.name/tags/firmware>firmware</a>
<a class="chip text-accent" href=https://blog.pancho.name/tags/ubuntu>ubuntu</a></section><div class="divider my-gap"></div><footer class="col-12 d-inline-block"><span class=float-left><button class="btn btn-action btn-accent shadow s-circle" onclick=window.history.back()><i class="fas fa-arrow-left"></i></button></span>
<span class=float-right><div class="text-right float-left mx-2"><span class=text-dark>pancho horrillo</span><br><span class=text-gray>I do things with computers.</span></div><figure class="avatar avatar-lg"><img id=profile></figure></span></footer></article><footer class="container p-centered text-center my-gap"><div class=container><a class=symbol href=https://www.bbva.com/en/guest-authors/pancho-horrillo/ target=_blank><i class="fab fa-bbva"></i></a>
<a class=symbol href=mailto:pancho%20at%20pancho%20dot%20name target=_blank><i class="fas fa-envelope"></i></a>
<a class=symbol href=https://www.github.com/panchoh target=_blank><i class="fab fa-github"></i></a>
<a class=symbol href=https://www.linkedin.com/in/pancho-horrillo target=_blank><i class="fab fa-linkedin"></i></a>
<a class=symbol href=https://www.twitter.com/panchoHorrillo target=_blank><i class="fab fa-twitter"></i></a></div><small class=text-gray>© 2007-2023 pancho horrillo</small></footer></div></section><script src=//ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
<script src=https://blog.pancho.name/js/main.js></script>
<script src=https://blog.pancho.name/js/highlight.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>