<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="pancho horrillo"><meta name=description content="Rantings about life."><meta name=generator content="Hugo 0.118.2"><title>How to keep a copy of what you watch online &#183; …soul, as in software?</title><link rel="shortcut icon" href=https://blog.pancho.name/images/favicon.ico><link rel=stylesheet href=https://blog.pancho.name/css/spectre.min.css><link rel=stylesheet href=https://blog.pancho.name/css/style.css><link rel=stylesheet href=https://blog.pancho.name/css/highlight.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css><link href rel=alternate type=application/rss+xml title="…soul, as in software?"><meta property="og:title" content="How to keep a copy of what you watch online"><meta property="og:description" content="Adobe Flash (sic) is so pervasive these days, specially for online video distribution.
Sometimes (e.g., TED.com) the site kindly provides you with a link to download the video stream, but more often than not, they don’t (e.g., YouTube).
There are some tools around which will download the video feed for you, but only work for certain well-known sites. I’m thinking of course of clive and youtube-dl. These tools work by reverse-engineering the protocol the Flash client uses to talk to the &ldquo;mothership&rdquo;."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.pancho.name/posts/keeping-what-you-watch-online/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2009-12-31T12:22:00+01:00"><meta property="article:modified_time" content="2009-12-31T12:22:00+01:00"><meta itemprop=name content="How to keep a copy of what you watch online"><meta itemprop=description content="Adobe Flash (sic) is so pervasive these days, specially for online video distribution.
Sometimes (e.g., TED.com) the site kindly provides you with a link to download the video stream, but more often than not, they don’t (e.g., YouTube).
There are some tools around which will download the video feed for you, but only work for certain well-known sites. I’m thinking of course of clive and youtube-dl. These tools work by reverse-engineering the protocol the Flash client uses to talk to the &ldquo;mothership&rdquo;."><meta itemprop=datePublished content="2009-12-31T12:22:00+01:00"><meta itemprop=dateModified content="2009-12-31T12:22:00+01:00"><meta itemprop=wordCount content="565"><meta itemprop=keywords content="flash,video,"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to keep a copy of what you watch online"><meta name=twitter:description content="Adobe Flash (sic) is so pervasive these days, specially for online video distribution.
Sometimes (e.g., TED.com) the site kindly provides you with a link to download the video stream, but more often than not, they don’t (e.g., YouTube).
There are some tools around which will download the video feed for you, but only work for certain well-known sites. I’m thinking of course of clive and youtube-dl. These tools work by reverse-engineering the protocol the Flash client uses to talk to the &ldquo;mothership&rdquo;."><meta name=twitter:site content="@https://www.twitter.com/panchoHorrillo"></head><body onload=setPixelFont()><div class="container p-fixed" style=z-index:3><nav class="navbar m-2 p-2 s-rounded shadow bg-primary"><section class=navbar-section><button class="btn btn-action btn-primary s-circle text-gray" id=pixelfont-toggle><i class="fas fa-robot fa-lg"></i></button></section><section class=navbar-section><a class="btn btn-primary" href=https://blog.pancho.name/>Home</a>
<a class="btn btn-primary mx-2" href=/about/>About</a>
<a class="btn btn-accent" href target=_blank><i class="fas fa-rss fa-lg"></i></a></section></nav></div><section class="container grid-md"><div class=columns><article class="container p-centered mt-space"><header><h2 class=text-center>How to keep a copy of what you watch online</h2><h6 class="text-gray text-italic"></h6></header><section class=my-gap><p>Adobe Flash (sic) is so pervasive these days, specially for online video
distribution.</p><p>Sometimes (e.g., <a href=https://ted.com>TED.com</a>)
the site kindly provides you with a link to download
the video stream, but more often than not, they don’t (e.g., YouTube).</p><p>There are some tools around which will download the video feed for you, but
only work for certain well-known sites.
I’m thinking of course of <a href=http://clive.sf.net>clive</a> and <a href=https://youtube-dl.org/>youtube-dl</a>.
These tools work by reverse-engineering the protocol the Flash client uses to
talk to the &ldquo;mothership&rdquo;. Sometimes that protocol changes, without notice,
and that leaves you out in the cold ’till the tool author cracks it again, and
updates the tool in question accordingly.</p><p>So, in case you don’t have a working tool to download some nice video you just
watched, here is a simple procedure to find out the download URL that the Flash
client uses internally. Install some logging proxy, such as
<a href=https://tinyproxy.github.io/>Tinyproxy</a>, and configure your browser to use it. Load the page,
watch a bit of the video, and then check the logs. The URL will be there.
Feed it to wget, and you are all set!</p><p>Note that some sites will put the download URL literally in the web page, as a
parameter to the Flash player object, so looking for the string <code>.flv</code> on the
sources will work as well. <a href=https://rtve.es>RTVE</a> is one of such sites.</p><p>This procedure worked for me nicely, and I guess that some variation of it is
what the authors of clive and youtube-dl use to crack the protocols. Then I
run into <a href=https://citywire.co.uk>citywire</a>, a british financial news site. Their Flash
client uses <code>https</code> plus some kind of certificate to connect to their video
repository, so the proxy technique won’t work. This is because the proxy only
gets to see the encrypted connection, so you cannot extract the URL from it.
And the certificate precludes the use of faking <code>https</code> proxies like
<a href=https://tinyproxy.github.io/>WebScarab</a>. Mmmm. This is gonna be tough.</p><p>Then I realised (while sleeping, actually)
that the design of the client would require securing temporary
disk storage to ensure the video reproduction, as the video streams could grow
very large, and keeping all that stuff in RAM would be excessive. Where?
Well, in <code>/tmp</code>, of course! Yeah, you will find that most Flash video player
implementations work that way, securing a file named something like
<code>/tmp/Flash7oo3ar</code>, where they download the video stream, and keep it there
until you kill the player. Yay!</p><p>If you are in Windoze, these clients use exclusive file access to that
temporary file, so you cannot copy it. And since the client removes it when it
dies (when you close the web page on your browser), not much of a loophole
there. But in <code>UNIX®</code> it’s a different story. A simple <code>cp</code> or <code>ln</code> to that
file will allow you to keep it after the client dies. And what about Mac OS X?
There you have per-user <code>/tmp</code> dirs, but once you locate that directory you will
find the aforementioned file there. So we are all good! From now on, if you
just watched an online video you want to keep, go to <code>/tmp</code> and it will be
sitting there for you to back it up.</p><p>I really look forward to the next generation of web browsers providing
unified video reproduction capabilities, and hence rendering all this crappy
Flash stuff obsolete. That would be the day.</p><code class=text-bold>Tags</code>
<a class="chip text-accent" href=https://blog.pancho.name/tags/flash>flash</a>
<a class="chip text-accent" href=https://blog.pancho.name/tags/video>video</a></section><div class="divider my-gap"></div><footer class="col-12 d-inline-block"><span class=float-left><button class="btn btn-action btn-accent shadow s-circle" onclick=window.history.back()><i class="fas fa-arrow-left"></i></button></span>
<span class=float-right><div class="text-right float-left mx-2"><span class=text-dark>pancho horrillo</span><br><span class=text-gray>I do things with computers.</span></div><figure class="avatar avatar-lg"><img id=profile></figure></span></footer></article><footer class="container p-centered text-center my-gap"><div class=container><a class=symbol href=https://www.bbva.com/en/guest-authors/pancho-horrillo/ target=_blank><i class="fab fa-bbva"></i></a>
<a class=symbol href=mailto:pancho%20at%20pancho%20dot%20name target=_blank><i class="fas fa-envelope"></i></a>
<a class=symbol href=https://www.github.com/panchoh target=_blank><i class="fab fa-github"></i></a>
<a class=symbol href=https://www.linkedin.com/in/pancho-horrillo target=_blank><i class="fab fa-linkedin"></i></a>
<a class=symbol href=https://www.twitter.com/panchoHorrillo target=_blank><i class="fab fa-twitter"></i></a></div><small class=text-gray>© 2007-2023 pancho horrillo</small></footer></div></section><script src=//ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
<script src=https://blog.pancho.name/js/main.js></script>
<script src=https://blog.pancho.name/js/highlight.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>